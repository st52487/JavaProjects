-- Generated by Oracle SQL Developer Data Modeler 17.4.0.355.2121
--   at:        2018-04-29 12:02:33 CEST
--   site:      Oracle Database 12c
--   type:      Oracle Database 12c



DROP TABLE kategorie CASCADE CONSTRAINTS;

DROP TABLE kontakt CASCADE CONSTRAINTS;

DROP TABLE pracoviste CASCADE CONSTRAINTS;

DROP TABLE predmet CASCADE CONSTRAINTS;

DROP TABLE relation_10 CASCADE CONSTRAINTS;

DROP TABLE rozvrhovy_plan CASCADE CONSTRAINTS;

DROP TABLE stud_obor CASCADE CONSTRAINTS;

DROP TABLE studijni_plan CASCADE CONSTRAINTS;

DROP TABLE vyucujici CASCADE CONSTRAINTS;

DROP TABLE zpusob_vyuky CASCADE CONSTRAINTS;

CREATE TABLE kategorie (
    id_kategorie    NUMBER NOT NULL,
    druhkategorie   VARCHAR2(200) NOT NULL
);

ALTER TABLE kategorie ADD CONSTRAINT kategorie_pk PRIMARY KEY ( id_kategorie );

CREATE TABLE kontakt (
    telefon      NUMBER NOT NULL,
    id_kontakt   NUMBER NOT NULL,
    mobil        NUMBER,
    email        VARCHAR2(50) NOT NULL
);

ALTER TABLE kontakt ADD CONSTRAINT kontakt_pk PRIMARY KEY ( id_kontakt );

CREATE TABLE pracoviste (
    id_pracoviste      NUMBER NOT NULL,
    zkratka            CHAR(10),
    nazev              VARCHAR2(200) NOT NULL,
    fakulta            VARCHAR2(200) NOT NULL,
    plnynazevfakulta   VARCHAR2(200) NOT NULL
);

ALTER TABLE pracoviste ADD CONSTRAINT pracoviste_pk PRIMARY KEY ( id_pracoviste );

CREATE TABLE predmet (
    id_predmet        NUMBER NOT NULL,
    nazev             CHAR(15) NOT NULL,
    zkratka           CHAR(5) NOT NULL,
    zpusobzakonceni   VARCHAR2(255) NOT NULL,
    formavyuky        VARCHAR2(200) NOT NULL,
    kapacita          NUMBER NOT NULL
);

ALTER TABLE predmet ADD CONSTRAINT predmet_pk PRIMARY KEY ( id_predmet );

CREATE TABLE relation_10 ( 
--  ERROR: Column name length exceeds maximum allowed length(30) 
    rozvr_plan_id_rozvr_plan   NUMBER NOT NULL,
    zpusob_vyuky_id_zpusobvyuky       NUMBER NOT NULL
);

ALTER TABLE relation_10 ADD CONSTRAINT relation_10_pk PRIMARY KEY ( id_rozvrhovyplan,
id_zpusobvyuky );

CREATE TABLE rozvrhovy_plan (
    id_rozvrhovyplan        NUMBER NOT NULL,
    rozsahhodin             NUMBER NOT NULL,
    predmet_id_predmet      NUMBER NOT NULL,
    vyucujici_id_evidvyuc   NUMBER
);

ALTER TABLE rozvrhovy_plan ADD CONSTRAINT rozvrhovy_plan_pk PRIMARY KEY ( id_rozvrhovyplan );

CREATE TABLE stud_obor (
    id_studobor         NUMBER NOT NULL,
    slozeniplanu        VARCHAR2(255) NOT NULL,
    nazevoboru          VARCHAR2(100) NOT NULL,
    odhadpocetstudent   NUMBER NOT NULL
);

ALTER TABLE stud_obor ADD CONSTRAINT stud_obor_pk PRIMARY KEY ( id_studobor );

CREATE TABLE studijni_plan (
    id_studijniplan          NUMBER NOT NULL,
    kategorie_id_kategorie   NUMBER NOT NULL,
    stud_obor_id_studobor    NUMBER NOT NULL,
    predmet_id_predmet       NUMBER
);

ALTER TABLE studijni_plan ADD CONSTRAINT studijni_plan_pk PRIMARY KEY ( id_studijniplan );

CREATE TABLE vyucujici (
    id_evidvyuc                NUMBER NOT NULL,
    prijmeni                   VARCHAR2(50) NOT NULL,
    jmeno                      VARCHAR2(30) NOT NULL,
    titalza                    CHAR(5),
    titulpred                  CHAR(5),
    kontakt_id_kontakt         NUMBER NOT NULL,
    pracoviste_id_pracoviste   NUMBER NOT NULL
);

ALTER TABLE vyucujici ADD CONSTRAINT vyucujici_pk PRIMARY KEY ( id_evidvyuc );

CREATE TABLE zpusob_vyuky (
    id_zpusobvyuky               NUMBER NOT NULL,
    "druhVyuky(cvic,pred,sem)"   VARCHAR2(200) NOT NULL
);

ALTER TABLE zpusob_vyuky ADD CONSTRAINT zpusob_vyuky_pk PRIMARY KEY ( id_zpusobvyuky );

ALTER TABLE relation_10
    ADD CONSTRAINT relation_10_rozvrhovy_plan_fk FOREIGN KEY (id_rozvrhovyplan )
        REFERENCES rozvrhovy_plan ( id_rozvrhovyplan );

ALTER TABLE relation_10
    ADD CONSTRAINT relation_10_zpusob_vyuky_fk FOREIGN KEY (id_zpusobvyuky )
        REFERENCES zpusob_vyuky ( id_zpusobvyuky );

ALTER TABLE rozvrhovy_plan
    ADD CONSTRAINT rozvrhovy_plan_predmet_fk FOREIGN KEY (id_predmet )
        REFERENCES predmet ( id_predmet );

ALTER TABLE rozvrhovy_plan
    ADD CONSTRAINT rozvrhovy_plan_vyucujici_fk FOREIGN KEY (id_evidvyuc )
        REFERENCES vyucujici ( id_evidvyuc );

ALTER TABLE studijni_plan
    ADD CONSTRAINT studijni_plan_kategorie_fk FOREIGN KEY (id_kategorie )
        REFERENCES kategorie ( id_kategorie );

ALTER TABLE studijni_plan
    ADD CONSTRAINT studijni_plan_predmet_fk FOREIGN KEY (id_predmet )
        REFERENCES predmet ( id_predmet );

ALTER TABLE studijni_plan
    ADD CONSTRAINT studijni_plan_stud_obor_fk FOREIGN KEY (id_studobor )
        REFERENCES stud_obor ( id_studobor );

ALTER TABLE vyucujici
    ADD CONSTRAINT vyucujici_kontakt_fk FOREIGN KEY (id_kontakt )
        REFERENCES kontakt ( id_kontakt );

ALTER TABLE vyucujici
    ADD CONSTRAINT vyucujici_pracoviste_fk FOREIGN KEY (id_pracoviste )
        REFERENCES pracoviste ( id_pracoviste );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            10
-- CREATE INDEX                             0
-- ALTER TABLE                             19
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- TSDP POLICY                              0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   1
-- WARNINGS                                 0
